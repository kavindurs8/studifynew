import{v as D,r as m,j as e,$ as M,Y as p}from"./app-DsiinyfJ.js";import{T as k}from"./TeacherLayout-C2Oz-zyu.js";import"./index-DFVleI9N.js";function C({teacher:g}){const{data:s,setData:l,post:v,processing:u,errors:a,progress:n}=D({title:"",description:"",video_file:null,duration:null}),[f,c]=m.useState(!1),[i,b]=m.useState(null),j=t=>{t.preventDefault(),v(route("teacher.video-library.store"))},x=t=>{t.preventDefault(),t.stopPropagation(),t.type==="dragenter"||t.type==="dragover"?c(!0):t.type==="dragleave"&&c(!1)},y=t=>{if(t.preventDefault(),t.stopPropagation(),c(!1),t.dataTransfer.files&&t.dataTransfer.files[0]){const r=t.dataTransfer.files[0];l("video_file",r),h(r)}},N=t=>{if(t.target.files[0]){const r=t.target.files[0];l("video_file",r),h(r)}},h=t=>{const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=function(){window.URL.revokeObjectURL(r.src);const d=r.duration,o=w(d);l("duration",o),b({duration:o,size:(t.size/(1024*1024)).toFixed(2),type:t.type,width:r.videoWidth,height:r.videoHeight})},r.src=URL.createObjectURL(t)},w=t=>{if(!t||isNaN(t))return null;const r=Math.floor(t/3600),d=Math.floor(t%3600/60),o=Math.floor(t%60);return r>0?`${r}:${d.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${d}:${o.toString().padStart(2,"0")}`};return e.jsxs(k,{teacher:g,title:"Upload Video - STUDIFY",pageTitle:"Upload Video",pageSubtitle:"Upload your video to YouTube and add it to your library",activeMenuItem:"video-library",children:[e.jsx(M,{title:"Upload Video"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(p,{href:route("teacher.video-library.index"),className:"flex items-center text-blue-400 hover:text-blue-300 transition-colors duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Video Library"]})}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video File *"}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors duration-200 ${f?"border-blue-400 bg-blue-900/20":"border-gray-600 hover:border-gray-500"}`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:y,children:[e.jsx("input",{type:"file",id:"video_file",accept:"video/*",onChange:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("p",{className:"text-gray-400 mb-2",children:s.video_file?`Selected: ${s.video_file.name}`:"Drop your video file here, or click to browse"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Supported formats: MP4, AVI, MOV, WMV, FLV, WEBM (Max: 2GB)"})]})]}),a.video_file&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:a.video_file})]}),i&&e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Video Information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Duration:"}),e.jsx("p",{className:"text-white font-medium",children:i.duration})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Size:"}),e.jsxs("p",{className:"text-white font-medium",children:[i.size," MB"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Resolution:"}),e.jsxs("p",{className:"text-white font-medium",children:[i.width,"x",i.height]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Format:"}),e.jsx("p",{className:"text-white font-medium",children:i.type.split("/")[1].toUpperCase()})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-300 mb-2",children:"Video Title *"}),e.jsx("input",{type:"text",id:"title",value:s.title,onChange:t=>l("title",t.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter video title",maxLength:"255"}),a.title&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:a.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:s.description,onChange:t=>l("description",t.target.value),rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter video description",maxLength:"5000"}),a.description&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:a.description})]}),n&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[n.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${n.percentage}%`}})})]}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-400 font-medium mb-1",children:"Privacy Notice"}),e.jsx("p",{className:"text-blue-300 text-sm",children:"Your video will be uploaded to STUDIFY video library as an unlisted video. You can share the link with your students."})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(p,{href:route("teacher.video-library.index"),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors duration-200",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:u||!s.title||!s.video_file,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg transition-colors duration-200 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),u?"Uploading...":"Upload to YouTube"]})]})]})})]})]})}export{C as default};
