import{q as w,r as C,v as k,j as e,Y as P,c as z}from"./app-DsiinyfJ.js";import{I as o,T as n}from"./TextInput-Cqwv5mhS.js";import{I as i}from"./InputLabel-yYW2s_lh.js";import{P as F}from"./PrimaryButton-DtxTvRrX.js";import{z as I}from"./transition-CgssX4VA.js";function T({mustVerifyEmail:p,status:f,className:x="",countries:h}){const t=w().props.auth.user;console.log("Profile form user data:",t),console.log("profile_picture field:",t.profile_picture),console.log("avatar field:",t.avatar),console.log("profile_image accessor:",t.profile_image);const[c,d]=C.useState(()=>t.profile_picture?`/storage/${t.profile_picture}`:t.avatar?t.avatar:null),{data:l,setData:s,post:g,errors:a,processing:v,recentlySuccessful:j}=k({name:t.name,email:t.email,profile_picture:null,country:t.country||"",city:t.city||"",zip_code:t.zip_code||"",_method:"patch"}),y=r=>{r.preventDefault(),g(route("profile.update"))},N=r=>{const m=r.target.files[0];if(s("profile_picture",m),m){const u=new FileReader;u.onload=_=>d(_.target.result),u.readAsDataURL(m)}},b=()=>{z.post(route("profile.remove-picture")).then(()=>{d(null),s("profile_picture",null)}).catch(r=>{console.error("Error removing profile picture:",r)})};return e.jsxs("section",{className:x,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your account's profile information and email address."})]}),e.jsxs("form",{onSubmit:y,className:"mt-6 space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"profile_picture",value:"Profile Picture"}),e.jsxs("div",{className:"mt-2 flex items-center space-x-6",children:[e.jsx("div",{className:"shrink-0",children:c?e.jsx("img",{className:"h-20 w-20 object-cover rounded-full border-2 border-gray-300",src:c,alt:"Profile preview"}):e.jsx("div",{className:"h-20 w-20 rounded-full bg-gray-300 flex items-center justify-center border-2 border-gray-300",children:e.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("label",{className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("span",{children:"Change"}),e.jsx("input",{id:"profile_picture",name:"profile_picture",type:"file",accept:"image/*",className:"sr-only",onChange:N})]}),(c||t.profile_picture||t.avatar)&&e.jsx("button",{type:"button",onClick:b,className:"text-sm text-red-600 hover:text-red-500",children:"Remove"})]})]}),e.jsx(o,{message:a.profile_picture,className:"mt-2"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"JPG, PNG, GIF up to 2MB"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",value:"Name"}),e.jsx(n,{id:"name",className:"mt-1 block w-full",value:l.name,onChange:r=>s("name",r.target.value),required:!0,isFocused:!0,autoComplete:"name"}),e.jsx(o,{className:"mt-2",message:a.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",value:"Email"}),e.jsx(n,{id:"email",type:"email",className:"mt-1 block w-full",value:l.email,onChange:r=>s("email",r.target.value),required:!0,autoComplete:"username"}),e.jsx(o,{className:"mt-2",message:a.email})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"country",value:"Country (Optional)"}),e.jsxs("select",{id:"country",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:l.country,onChange:r=>s("country",r.target.value),children:[e.jsx("option",{value:"",children:"Select a country"}),h.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsx(o,{className:"mt-2",message:a.country})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"city",value:"City (Optional)"}),e.jsx(n,{id:"city",className:"mt-1 block w-full",value:l.city,onChange:r=>s("city",r.target.value),autoComplete:"address-level2",placeholder:"Enter your city"}),e.jsx(o,{className:"mt-2",message:a.city})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"zip_code",value:"Zip Code (Optional)"}),e.jsx(n,{id:"zip_code",className:"mt-1 block w-full",value:l.zip_code,onChange:r=>s("zip_code",r.target.value),autoComplete:"postal-code",placeholder:"Enter your zip code"}),e.jsx(o,{className:"mt-2",message:a.zip_code})]}),p&&t.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-2 text-gray-800",children:["Your email address is unverified.",e.jsx(P,{href:route("verification.send"),method:"post",as:"button",className:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Click here to re-send the verification email."})]}),f==="verification-link-sent"&&e.jsx("div",{className:"mt-2 font-medium text-sm text-green-600",children:"A new verification link has been sent to your email address."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{disabled:v,children:"Save"}),e.jsx(I,{show:j,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]})}export{T as default};
