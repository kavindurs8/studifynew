import{r as i,j as e}from"./app-DsiinyfJ.js";import{j as g,C as h,D as b,E as j,G as B,H as G,I as J,J as U}from"./index-DFVleI9N.js";import V from"./SectionEditor-BuzveeZc.js";import W from"./LectureEditor-Z0pyXDzl.js";import Z from"./QuizEditor-D-lGaUWX.js";function ae({courseId:n,onNext:C,onPrev:E}){const[l,k]=i.useState([]),[z,d]=i.useState(!1),[L,m]=i.useState(!1),[F,u]=i.useState(!1),[Q,f]=i.useState(null),[q,y]=i.useState(null),[A,N]=i.useState(null),[p,x]=i.useState(null),[M,$]=i.useState(!0);i.useEffect(()=>{n&&c()},[n]);const c=async()=>{try{const r=await(await fetch(`/teacher/courses/${n}/curriculum`)).json();r.success&&k(r.curriculum)}catch(s){console.error("Error loading curriculum:",s)}finally{$(!1)}},v=()=>{f(null),d(!0)},T=s=>{f(s),d(!0)},P=s=>{x(s),y(null),m(!0)},R=s=>{x(s.section_id),y(s),m(!0)},_=s=>{x(s),N(null),u(!0)},D=s=>{x(s.section_id),N(s),u(!0)},K=async s=>{if(confirm("Are you sure you want to delete this section? This will also delete all lectures and quizzes in this section."))try{(await fetch(`/teacher/courses/${n}/sections/${s}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok&&c()}catch(r){console.error("Error deleting section:",r)}},O=async(s,r)=>{if(confirm("Are you sure you want to delete this lecture?"))try{(await fetch(`/teacher/courses/${n}/sections/${s}/lectures/${r}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok&&c()}catch(a){console.error("Error deleting lecture:",a)}},X=async(s,r)=>{if(confirm("Are you sure you want to delete this quiz?"))try{(await fetch(`/teacher/courses/${n}/sections/${s}/quizzes/${r}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok&&c()}catch(a){console.error("Error deleting quiz:",a)}},o=l.reduce((s,r)=>{var a;return s+(((a=r.lectures)==null?void 0:a.length)||0)},0),H=l.reduce((s,r)=>{var a;return s+(((a=r.quizzes)==null?void 0:a.length)||0)},0),w=l.length>0&&o>=5;return M?e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Curriculum"}),e.jsx("div",{className:"mt-4 bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-5 w-5 text-blue-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Here's where you add course contentâ€”like lectures, course sections, assignments, and more. Click a + icon on the left to get started."})})]})}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Start putting together your course by creating sections, lectures and practice activities (quizzes, coding exercises and assignments). Use your course outline to structure your content and label your sections and lectures clearly."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sections"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:o}),e.jsx("div",{className:"text-sm text-gray-600",children:"Lectures"}),o<5&&e.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Minimum 5 required"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:H}),e.jsx("div",{className:"text-sm text-gray-600",children:"Quizzes"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-dashed border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Add Section"]})}),e.jsx("div",{className:"space-y-6",children:l.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sections yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first section to start building your curriculum"}),e.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Create First Section"]})]}):l.map((s,r)=>{var a,S;return e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full mr-3",children:["Section ",r+1]}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(s),className:"text-gray-400 hover:text-gray-600",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>K(s.id),className:"text-red-400 hover:text-red-600",children:e.jsx(j,{className:"h-4 w-4"})})]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.description})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-3",children:[(a=s.lectures)==null?void 0:a.map((t,Y)=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-white border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-4 w-4 text-green-500 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["Lecture ",t.lecture_number,": ",t.title]}),t.duration&&e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",Math.floor(t.duration/60),":",(t.duration%60).toString().padStart(2,"0"),")"]}),t.is_preview&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full ml-2",children:"Preview"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>R(t),className:"text-gray-400 hover:text-gray-600",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>O(s.id,t.id),className:"text-red-400 hover:text-red-600",children:e.jsx(j,{className:"h-4 w-4"})})]})]},t.id)),(S=s.quizzes)==null?void 0:S.map((t,Y)=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-white border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 text-purple-500 mr-3"}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-900",children:["Quiz ",t.quiz_number,": ",t.title]}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",t.questions_count||0," questions)"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>D(t),className:"text-gray-400 hover:text-gray-600",children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>X(s.id,t.id),className:"text-red-400 hover:text-red-600",children:e.jsx(j,{className:"h-4 w-4"})})]})]},t.id))]}),e.jsxs("div",{className:"mt-4 flex space-x-3",children:[e.jsxs("button",{onClick:()=>P(s.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(h,{className:"h-3 w-3 mr-2"}),"Add Lecture"]}),e.jsxs("button",{onClick:()=>_(s.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(h,{className:"h-3 w-3 mr-2"}),"Add Quiz"]})]})]})]},s.id)})}),!w&&e.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Course Requirements Not Met"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[l.length===0&&e.jsx("li",{children:"Your course must have at least one section"}),o<5&&e.jsxs("li",{children:["Your course must have at least 5 lectures (currently ",o,")"]})]})})]})]})}),e.jsxs("div",{className:"flex justify-between pt-8 border-t mt-8",children:[e.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center px-6 py-3 border border-gray-300 shadow-sm text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Previous"]}),e.jsxs("button",{type:"button",onClick:C,disabled:!w,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:["Continue to Pricing",e.jsx(U,{className:"ml-2 h-4 w-4"})]})]})]}),z&&e.jsx(V,{courseId:n,section:Q,onClose:()=>d(!1),onSave:()=>{d(!1),c()}}),L&&e.jsx(W,{courseId:n,sectionId:p,lecture:q,onClose:()=>m(!1),onSave:()=>{m(!1),c()}}),F&&e.jsx(Z,{courseId:n,sectionId:p,quiz:A,onClose:()=>u(!1),onSave:()=>{u(!1),c()}})]})}export{ae as default};
