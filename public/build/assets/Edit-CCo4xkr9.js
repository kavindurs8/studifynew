import{j as e,m as T,r as o,q as $,v as q,$ as P}from"./app-DsiinyfJ.js";import{T as Y}from"./TeacherLayout-C2Oz-zyu.js";import"./index-DFVleI9N.js";function O({course:i,sections:y,setSections:S,onAddSection:a,onEditSection:t,onAddLecture:_,onEditLecture:p,onAddQuiz:m,onEditQuiz:v}){const g=s=>{confirm("Are you sure you want to delete this section?")&&T.delete(route("teacher.courses.sections.destroy",[i.id,s]),{onSuccess:()=>{window.location.reload()},onError:d=>{console.error("Error deleting section:",d),alert("Error deleting section. Please try again.")}})},N=(s,d)=>{confirm("Are you sure you want to delete this lecture?")&&T.delete(route("teacher.courses.sections.lectures.destroy",[i.id,s,d]),{onSuccess:()=>{window.location.reload()},onError:r=>{console.error("Error deleting lecture:",r),alert("Error deleting lecture. Please try again.")}})},x=(s,d)=>{confirm("Are you sure you want to delete this quiz?")&&T.delete(route("teacher.courses.sections.quizzes.destroy",[i.id,s,d]),{onSuccess:()=>{window.location.reload()},onError:r=>{console.error("Error deleting quiz:",r),alert("Error deleting quiz. Please try again.")}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Course Curriculum"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Add sections, lectures, and quizzes to build your course content"})]}),e.jsxs("button",{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 inline-flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Section"]})]}),y.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-700 rounded-lg border border-gray-600",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:"No sections yet"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Start building your course by adding your first section"}),e.jsx("button",{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200",children:"Add Your First Section"})]}):e.jsx("div",{className:"space-y-6",children:y.map((s,d)=>e.jsxs("div",{className:"bg-gray-700 rounded-lg border border-gray-600",children:[e.jsx("div",{className:"p-6 border-b border-gray-600",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-lg font-bold text-white mb-2",children:["Section ",d+1,": ",s.title]}),s.description&&e.jsx("p",{className:"text-gray-300",children:s.description})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>t(s),className:"text-blue-400 hover:text-blue-300 p-2",title:"Edit Section",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>g(s.id),className:"text-red-400 hover:text-red-300 p-2",title:"Delete Section",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsxs("button",{onClick:()=>_(s),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6 4h1m4 0h1M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Add Lecture"]}),e.jsxs("button",{onClick:()=>m(s),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Add Quiz"]})]}),s.lectures&&s.lectures.length>0&&e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-300 uppercase tracking-wide",children:"Lectures"}),s.lectures.map((r,h)=>e.jsxs("div",{className:"bg-gray-600 p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-600 text-white p-2 rounded",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6 4h1m4 0h1M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-white font-medium",children:["Lecture ",h+1,": ",r.title]}),r.duration&&e.jsx("p",{className:"text-gray-400 text-sm",children:r.formatted_duration})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(r,s),className:"text-blue-400 hover:text-blue-300 p-1",title:"Edit Lecture",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>N(s.id,r.id),className:"text-red-400 hover:text-red-300 p-1",title:"Delete Lecture",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},r.id))]}),s.quizzes&&s.quizzes.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-300 uppercase tracking-wide",children:"Quizzes"}),s.quizzes.map((r,h)=>{var b;return e.jsxs("div",{className:"bg-gray-600 p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-purple-600 text-white p-2 rounded",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-white font-medium",children:["Quiz ",h+1,": ",r.title]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[((b=r.questions)==null?void 0:b.length)||0," questions â€¢ ",r.passing_score,"% to pass"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v(r,s),className:"text-blue-400 hover:text-blue-300 p-1",title:"Edit Quiz",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>x(s.id,r.id),className:"text-red-400 hover:text-red-300 p-1",title:"Delete Quiz",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},r.id)})]}),(!s.lectures||s.lectures.length===0)&&(!s.quizzes||s.quizzes.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:e.jsx("p",{children:"No content added yet. Add lectures or quizzes to get started."})})]})]},s.id))})]})}function R({isOpen:i,onClose:y,course:S,section:a,lecture:t,onLectureCreated:_}){var C;const[p,m]=o.useState(""),[v,g]=o.useState(""),[N,x]=o.useState(null),[s,d]=o.useState(""),[r,h]=o.useState(!1),[b,M]=o.useState("text"),[E,Q]=o.useState(!1),[j,z]=o.useState({});o.useEffect(()=>{t&&i?(m(t.title||""),g(t.content||""),M(t.youtube_url?"youtube":t.video_path?"video":"text"),d(t.youtube_url||""),h(t.is_preview||!1),x(null)):!t&&i&&(m(""),g(""),M("text"),d(""),h(!1),x(null)),z({})},[t,i]);const D=f=>{f.preventDefault(),Q(!0);const k=new FormData;k.append("title",p),k.append("content",v||""),k.append("content_type",b),k.append("is_preview",r?"1":"0"),b==="video"&&N?k.append("video_file",N):b==="youtube"&&s&&k.append("youtube_url",s),t&&k.append("_method","PUT");const l=t?route("teacher.courses.sections.lectures.update",[S.id,a.id,t.id]):route("teacher.courses.sections.lectures.store",[S.id,a.id]);T["post"](l,k,{onSuccess:()=>{window.location.reload()},onError:u=>{console.log("Validation errors:",u),z(u),Q(!1)}})};return i?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-900 opacity-75",onClick:y})}),e.jsx("div",{className:"inline-block align-bottom bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"bg-gray-800 px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t?"Edit Lecture":"Add New Lecture"}),e.jsx("button",{type:"button",onClick:y,className:"text-gray-400 hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Lecture Title *"}),e.jsx("input",{type:"text",value:p,onChange:f=>m(f.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter lecture title",required:!0}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["This will be saved as: Lecture ",(((C=a==null?void 0:a.lectures)==null?void 0:C.length)||0)+1,": ",p||"Your Title"]}),j.title&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:j.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Content Type *"}),e.jsxs("select",{value:b,onChange:f=>M(f.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",children:[e.jsx("option",{value:"text",children:"Text Content"}),e.jsx("option",{value:"video",children:"Video Upload"}),e.jsx("option",{value:"youtube",children:"YouTube URL"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_preview",checked:r,onChange:f=>h(f.target.checked),className:"mr-3 rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_preview",className:"text-sm text-gray-300",children:"Make this lecture a free preview"})]})]}),e.jsxs("div",{className:"space-y-4",children:[b==="video"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video File"}),e.jsx("input",{type:"file",accept:"video/*",onChange:f=>x(f.target.files[0]),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),(t==null?void 0:t.video_path)&&e.jsxs("p",{className:"text-xs text-green-400 mt-1",children:["Current: ",t.video_path.split("/").pop()]}),j.video_file&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:j.video_file})]}),b==="youtube"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"YouTube URL"}),e.jsx("input",{type:"url",value:s,onChange:f=>d(f.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"https://www.youtube.com/watch?v=..."}),j.youtube_url&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:j.youtube_url})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Lecture Content"}),e.jsx("textarea",{value:v,onChange:f=>g(f.target.value),rows:8,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter lecture content, notes, or description..."}),j.content&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:j.content})]})]}),e.jsxs("div",{className:"bg-gray-700 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:E||!p.trim(),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?"Saving...":t?"Update Lecture":"Create Lecture"})]})]})})]})}):null}function I({isOpen:i,onClose:y,course:S,section:a,quiz:t,onQuizCreated:_}){var k;const[p,m]=o.useState(""),[v,g]=o.useState(""),[N,x]=o.useState(70),[s,d]=o.useState(""),[r,h]=o.useState([]),[b,M]=o.useState(!1),[E,Q]=o.useState({});o.useEffect(()=>{t?(m(t.title||""),g(t.description||""),x(t.passing_score||70),d(t.time_limit||""),h(t.questions||[])):(m(""),g(""),x(70),d(""),h([j()])),Q({})},[t,i]);const j=()=>({id:Date.now()+Math.random(),question_text:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_answer:"A"}),z=()=>{h([...r,j()])},D=l=>{r.length>1&&h(r.filter((c,u)=>u!==l))},C=(l,c,u)=>{const A=[...r];A[l]={...A[l],[c]:u},h(A)},f=l=>{l.preventDefault(),M(!0);const c={title:p,description:v,passing_score:N,time_limit:s,questions:r},u=t?route("teacher.courses.sections.quizzes.update",[S.id,a.id,t.id]):route("teacher.courses.sections.quizzes.store",[S.id,a.id]);T[t?"put":"post"](u,c,{onSuccess:()=>{window.location.reload()},onError:H=>{Q(H),M(!1)}})};return o.useEffect(()=>{if(t&&i){if(m(t.title||""),g(t.description||""),x(t.passing_score||70),d(t.time_limit||""),t.questions&&t.questions.length>0){const l=t.questions.map(c=>({id:Date.now()+Math.random(),question_text:c.question,option_a:c.options[0]||"",option_b:c.options[1]||"",option_c:c.options[2]||"",option_d:c.options[3]||"",correct_answer:["A","B","C","D"][c.correct_answer]||"A"}));h(l)}}else!t&&i&&(m(""),g(""),x(70),d(""),h([{id:Date.now(),question_text:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_answer:"A"}]))},[t,i]),i?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-900 opacity-75",onClick:y})}),e.jsx("div",{className:"inline-block align-bottom bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"bg-gray-800 px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t?"Edit Quiz":"Add New Quiz"}),e.jsx("button",{type:"button",onClick:y,className:"text-gray-400 hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quiz Title *"}),e.jsx("input",{type:"text",value:p,onChange:l=>m(l.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter quiz title (without 'Quiz X:')",required:!0}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["This will be saved as: Quiz ",(((k=a==null?void 0:a.quizzes)==null?void 0:k.length)||0)+1,": ",p||"Your Title"]}),E.title&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:E.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Passing Score (%)"}),e.jsx("input",{type:"number",min:"1",max:"100",value:N,onChange:l=>x(parseInt(l.target.value)),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors"})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quiz Description"}),e.jsx("textarea",{value:v,onChange:l=>g(l.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Optional description for this quiz"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Time Limit (minutes) - Optional"}),e.jsx("input",{type:"number",min:"1",value:s,onChange:l=>d(l.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Leave empty for no time limit"})]})]}),e.jsxs("div",{className:"border-t border-gray-600 pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Quiz Questions"}),e.jsxs("button",{type:"button",onClick:z,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Question"]})]}),e.jsx("div",{className:"space-y-6",children:r.map((l,c)=>e.jsxs("div",{className:"bg-gray-700 p-6 rounded-lg border border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h5",{className:"text-white font-medium",children:["Question ",c+1]}),r.length>1&&e.jsx("button",{type:"button",onClick:()=>D(c),className:"text-red-400 hover:text-red-300 p-1",title:"Delete Question",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Question Text *"}),e.jsx("textarea",{value:l.question_text,onChange:u=>C(c,"question_text",u.target.value),rows:2,className:"w-full px-4 py-3 bg-gray-600 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter your question here...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Option A *"}),e.jsx("input",{type:"text",value:l.option_a,onChange:u=>C(c,"option_a",u.target.value),className:"w-full px-4 py-3 bg-gray-600 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter option A",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Option B *"}),e.jsx("input",{type:"text",value:l.option_b,onChange:u=>C(c,"option_b",u.target.value),className:"w-full px-4 py-3 bg-gray-600 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter option B",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Option C *"}),e.jsx("input",{type:"text",value:l.option_c,onChange:u=>C(c,"option_c",u.target.value),className:"w-full px-4 py-3 bg-gray-600 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter option C",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Option D *"}),e.jsx("input",{type:"text",value:l.option_d,onChange:u=>C(c,"option_d",u.target.value),className:"w-full px-4 py-3 bg-gray-600 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter option D",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Correct Answer *"}),e.jsxs("select",{value:l.correct_answer,onChange:u=>C(c,"correct_answer",u.target.value),className:"w-full px-4 py-3 bg-gray-600 border border-gray-500 rounded-lg text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",required:!0,children:[e.jsx("option",{value:"A",children:"Option A"}),e.jsx("option",{value:"B",children:"Option B"}),e.jsx("option",{value:"C",children:"Option C"}),e.jsx("option",{value:"D",children:"Option D"})]})]})]})]},l.id))})]})]}),e.jsxs("div",{className:"bg-gray-700 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!p.trim()||r.some(l=>!l.question_text.trim()),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?"Saving...":t?"Update Quiz":"Create Quiz"})]})]})})]})}):null}function X({isOpen:i,onClose:y,course:S,section:a,onSectionCreated:t}){const[_,p]=o.useState(""),[m,v]=o.useState(""),[g,N]=o.useState(!1),[x,s]=o.useState({});o.useEffect(()=>{a?(p(a.title||""),v(a.description||"")):(p(""),v("")),s({})},[a,i]);const d=r=>{r.preventDefault(),N(!0),s({});const h={title:_,description:m},b=a?route("teacher.courses.sections.update",[S.id,a.id]):route("teacher.courses.sections.store",S.id);T[a?"put":"post"](b,h,{onSuccess:()=>{window.location.reload()},onError:E=>{s(E),N(!1)}})};return i?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-900 opacity-75",onClick:y})}),e.jsx("div",{className:"inline-block align-bottom bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"bg-gray-800 px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:a?"Edit Section":"Add New Section"}),e.jsx("button",{type:"button",onClick:y,className:"text-gray-400 hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Section Title *"}),e.jsx("input",{type:"text",value:_,onChange:r=>p(r.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Enter section title",required:!0}),x.title&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:x.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Section Description"}),e.jsx("textarea",{value:m,onChange:r=>v(r.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-colors",placeholder:"Optional description for this section"}),x.description&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:x.description})]})]})]}),e.jsxs("div",{className:"bg-gray-700 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!_.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":a?"Update Section":"Create Section"})]})]})})]})}):null}function Z({course:i,sections:y}){var V,U;const{auth:S}=$().props,a=S.teacher,[t,_]=o.useState("curriculum"),[p,m]=o.useState(y||[]),[v,g]=o.useState(!1),[N,x]=o.useState(!1),[s,d]=o.useState(!1),[r,h]=o.useState(null),[b,M]=o.useState(null),[E,Q]=o.useState(null),[j,z]=o.useState(null),{post:D,processing:C}=q(),f=()=>{h(null),g(!0)},k=n=>{h(n),g(!0)},l=n=>{z(n),M(null),x(!0)},c=(n,L)=>{z(L),M(n),x(!0)},u=n=>{z(n),Q(null),d(!0)},A=(n,L)=>{z(L),Q(n),d(!0)},H=()=>{confirm("Are you sure you want to submit this course for review?")&&D(route("teacher.courses.submit",i.id),{onSuccess:()=>{alert("Course submitted for review successfully!")}})},F=()=>p.length>=1&&p.some(n=>n.lectures&&n.lectures.length>0||n.quizzes&&n.quizzes.length>0);return e.jsxs(Y,{teacher:a,title:`Edit Course: ${i.title} - STUDIFY`,pageTitle:`Edit Course: ${i.title}`,pageSubtitle:"Create engaging content and curriculum for your course",activeMenuItem:"courses",children:[e.jsx(P,{title:`Edit Course: ${i.title}`}),e.jsxs("div",{className:"mx-auto max-w-8xl",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-lg border border-gray-700 shadow-lg mb-8",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:i.title}),e.jsx("p",{className:"text-gray-400 mb-4",children:i.description}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${i.status==="published"?"bg-green-600 text-white":i.status==="pending_approval"?"bg-yellow-600 text-white":i.status==="draft"?"bg-gray-600 text-white":"bg-red-600 text-white"}`,children:((V=i.status)==null?void 0:V.charAt(0).toUpperCase())+((U=i.status)==null?void 0:U.slice(1))||"Draft"}),e.jsx("span",{className:"text-gray-400",children:i.category}),e.jsxs("span",{className:"text-green-400 font-bold",children:["$",i.price]})]})]}),e.jsx("div",{className:"space-x-4",children:i.status==="draft"&&F()&&e.jsx("button",{onClick:H,disabled:C,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:C?"Submitting...":"Submit for Review"})})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg border border-gray-700 shadow-lg",children:[e.jsx("div",{className:"border-b border-gray-600",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>_("curriculum"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t==="curriculum"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:"Curriculum"}),e.jsx("button",{onClick:()=>_("settings"),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t==="settings"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:"Course Settings"})]})}),e.jsxs("div",{className:"p-8",children:[t==="curriculum"&&e.jsx(O,{course:i,sections:p,setSections:m,onAddSection:f,onEditSection:k,onAddLecture:l,onEditLecture:c,onAddQuiz:u,onEditQuiz:A}),t==="settings"&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400",children:"Course settings coming soon..."})})]})]})]}),v&&e.jsx(X,{isOpen:v,onClose:()=>g(!1),course:i,section:r,onSectionCreated:n=>{m(r?L=>L.map(w=>w.id===n.id?n:w):L=>[...L,n]),g(!1)}}),N&&e.jsx(R,{isOpen:N,onClose:()=>x(!1),course:i,section:j,lecture:b,onLectureCreated:n=>{m(L=>L.map(w=>{if(w.id===j.id){const B=w.lectures||[];return b?{...w,lectures:B.map(W=>W.id===n.id?n:W)}:{...w,lectures:[...B,n]}}return w})),x(!1)}}),s&&e.jsx(I,{isOpen:s,onClose:()=>d(!1),course:i,section:j,quiz:E,onQuizCreated:n=>{m(L=>L.map(w=>{if(w.id===j.id){const B=w.quizzes||[];return E?{...w,quizzes:B.map(W=>W.id===n.id?n:W)}:{...w,quizzes:[...B,n]}}return w})),d(!1)}})]})}export{Z as default};
