import{r as j,v as f,j as e}from"./app-DsiinyfJ.js";import{x as n,M as x,p as v,I as y}from"./index-DFVleI9N.js";function _({data:r,setData:a,errors:o,pricingTiers:c,courseId:d,onPrev:g}){const[m,u]=j.useState(!1);f();const h=s=>{const t=c.find(l=>l.id===parseInt(s));t&&a("pricing_tier_id",t.id)},b=async()=>{u(!0);try{const s={pricing_tier_id:r.pricing_tier_id,level:r.level,language:r.language};await fetch(`/teacher/courses/${d}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(s)});const l=await(await fetch(`/teacher/courses/${d}/submit-for-review`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();l.success?window.location.href="/teacher/courses?message=Course submitted for review successfully!":alert(l.error||"Failed to submit course for review")}catch(s){console.error("Error submitting course:",s),alert("An error occurred while submitting the course for review")}finally{u(!1)}},i=c.find(s=>s.id===r.pricing_tier_id),p=(i==null?void 0:i.price)===0;return e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Set a Price for Your Course"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Please select the currency and the price tier for your course. If you'd like to offer your course for free, it must have a total video length of less than 2 hours. Also, courses with practice tests can not be free."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Choose Your Pricing Tier"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(s=>e.jsxs("div",{className:`relative border-2 rounded-lg p-4 cursor-pointer transition-all ${r.pricing_tier_id===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h(s.id),children:[r.pricing_tier_id===s.id&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"bg-blue-500 text-white rounded-full p-1",children:e.jsx(n,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:s.price===0?e.jsx(x,{className:"h-6 w-6 text-green-500"}):e.jsx(v,{className:"h-6 w-6 text-blue-500"})}),e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.price===0?"FREE":`${s.currency_symbol}${s.price}`}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.description}),s.features&&s.features.length>0&&e.jsx("ul",{className:"text-xs text-gray-500 mt-3 space-y-1",children:s.features.map((t,l)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(n,{className:"h-3 w-3 text-green-500 mr-1"}),t]},l))})]}),e.jsx("input",{type:"radio",name:"pricing_tier",value:s.id,checked:r.pricing_tier_id===s.id,onChange:()=>h(s.id),className:"sr-only"})]},s.id))}),o.pricing_tier_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.pricing_tier_id})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Level"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["beginner","intermediate","advanced"].map(s=>e.jsxs("div",{className:`border-2 rounded-lg p-3 cursor-pointer text-center transition-all ${r.level===s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>a("level",s),children:[e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:s}),e.jsx("input",{type:"radio",name:"level",value:s,checked:r.level===s,onChange:t=>a("level",t.target.value),className:"sr-only"})]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Language"}),e.jsxs("select",{value:r.language,onChange:s=>a("language",s.target.value),className:"mt-1 block w-full md:w-1/2 border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"english",children:"English"}),e.jsx("option",{value:"spanish",children:"Spanish"}),e.jsx("option",{value:"french",children:"French"}),e.jsx("option",{value:"german",children:"German"}),e.jsx("option",{value:"chinese",children:"Chinese"}),e.jsx("option",{value:"japanese",children:"Japanese"}),e.jsx("option",{value:"arabic",children:"Arabic"}),e.jsx("option",{value:"hindi",children:"Hindi"}),e.jsx("option",{value:"other",children:"Other"})]})]}),p&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(x,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Free Course Requirements"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Total video content must be less than 2 hours"}),e.jsx("li",{children:"Courses with quizzes cannot be free"}),e.jsx("li",{children:"Limited marketing features"})]})})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Price:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:i?i.price===0?"FREE":`${i.currency_symbol}${i.price}`:"Not selected"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Level:"}),e.jsx("span",{className:"ml-2 text-gray-900 capitalize",children:r.level})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Language:"}),e.jsx("span",{className:"ml-2 text-gray-900 capitalize",children:r.language})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:"ml-2 text-yellow-600",children:"Will be submitted for review"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(n,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Ready to Submit for Review"}),e.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Once you submit your course, it will be reviewed by our team. This process typically takes 1-3 business days. You'll receive an email notification when the review is complete."})]})]})})]}),e.jsxs("div",{className:"flex justify-between pt-8 border-t mt-8",children:[e.jsxs("button",{type:"button",onClick:g,className:"inline-flex items-center px-6 py-3 border border-gray-300 shadow-sm text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Previous"]}),e.jsxs("button",{type:"button",onClick:b,disabled:m||!r.pricing_tier_id,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?"Submitting...":"Submit for Review",e.jsx(n,{className:"ml-2 h-4 w-4"})]})]})]})}export{_ as default};
